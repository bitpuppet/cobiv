#:import win kivy.core.window
#:import math math

<Browser>:
    page_rows: self.height/self.cell_size
    max_rows: int(self.height*self.max_scroll_ratio/self.cell_size)
    grid: grid_layout
    right_sidebar: right_sidebar_layout
    max_items_cache: self.max_rows * 3
    BoxLayout:
        orientation: 'vertical'
        BoxLayout:
            orientation: 'horizontal'
            ThumbScrollView:
                id: scroll_view
                GridLayout:
                    id: grid_layout
                    cell_size: root.cell_size
                    cols: int(self.width/self.cell_size)
                    size_hint: None,None
                    width: win.Window.width - root.right_sidebar_size
                    height: int(self.cell_size * math.ceil(len(self.children)/float(self.cols)))
            BoxLayout:
                id: right_sidebar_layout
                size_hint: None, 1
                width: root.right_sidebar_size
        Label:
            size_hint: 1, None
            height: 30